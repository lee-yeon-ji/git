<!doctype html>
<html lang="ko">
<head>
	<meta charset="UTF-8">
	<meta name="viewport"
	      content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<link rel="stylesheet" type="text/css" href="../css/style1.css">
	<title>Lotto Play</title>
</head>
<body>

<div class="lotto-container">
	<div class="inner wrap">
		<header>
			<div class="header-group">
				<div class="logo-wrap">
					<a href="#none" class="logo-box">
						<img src="../img/img_logo.png">
					</a>
				</div>
			</div>
		</header>

		<div class="contents">
			<div class="user-wrap">
				<div class="item-box">
					<div class="user-mane-box">Test1님</div>
				</div>
				<div class="item-box">
					<div class="point-box">43,000P</div>
					<div class="lobby-btn-box">
						<a href="#none" class="lobby-btn">로비 이동</a>
					</div>
				</div>
			</div>

			<div class="logo-layout-wrap">
				<div class="lotto-tab-list">
					<button class="tab-btn-box" id="TabBtn1">로또</button>
					<button class="tab-btn-box active" id="TabBtn2">구매 하기</button>
					<button class="tab-btn-box" id="TabBtn3">구매 내역</button>
					<button class="tab-btn-box" id="TabBtn4">배분 방식</button>
				</div>

				<div class="lotto-check-group">
					<div class="check-inner">
						<div class="item-box">
							<div class="checked-wrap">
								<article class="info-msg-box">
									<i class="ic-msg"></i>
									<div class="info-msg-txt">5개의 번호를 선택하세요.</div>
								</article>

								<div class="checked-board">
									<div class="chk-wrap">
										<div class="chk-box">
											<div class="subject-box">
												<div class="label-box">A</div>
												<div class="price-box">1,000</div>
											</div>
											<div class="chk-con-box">
												<div class="chk-inner">
													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="1">
															<span class="txt">1</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="2">
															<span class="txt">2</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="3">
															<span class="txt">3</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="4">
															<span class="txt">4</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="5">
															<span class="txt">5</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="6">
															<span class="txt">6</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="7">
															<span class="txt">7</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="8">
															<span class="txt">8</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="9">
															<span class="txt">9</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="10">
															<span class="txt">10</span>
														</label>
													</div>


													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="11">
															<span class="txt">11</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="12">
															<span class="txt">12</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="13">
															<span class="txt">13</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="14">
															<span class="txt">14</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="15">
															<span class="txt">15</span>
														</label>
													</div>


													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="16">
															<span class="txt">16</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="17">
															<span class="txt">17</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="18">
															<span class="txt">18</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="19">
															<span class="txt">19</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="20">
															<span class="txt">20</span>
														</label>
													</div>


													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="21">
															<span class="txt">21</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="22">
															<span class="txt">22</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="23">
															<span class="txt">23</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="24">
															<span class="txt">24</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="25">
															<span class="txt">25</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="26">
															<span class="txt">26</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="27">
															<span class="txt">27</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="28">
															<span class="txt">28</span>
														</label>
													</div>
												</div>
												<div class="option-btn-box">
													<div class="option-btn">
														<label>
															<input type="radio" name="option" value="auto">
															<span class="txt">자동선택</span><i></i>
														</label>
													</div>
													<div class="option-btn">
														<label>
															<input type="radio" name="option" value="cancel">
															<span class="txt">취소</span><i></i>
														</label>
													</div>
												</div>

											</div>
										</div>
										<div class="chk-box">
											<div class="subject-box">
												<div class="label-box">B</div>
												<div class="price-box">1,000</div>
											</div>
											<div class="chk-con-box">
												<div class="chk-inner">
													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="1">
															<span class="txt">1</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="2">
															<span class="txt">2</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="3">
															<span class="txt">3</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="4">
															<span class="txt">4</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="5">
															<span class="txt">5</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="6">
															<span class="txt">6</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="7">
															<span class="txt">7</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="8">
															<span class="txt">8</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="9">
															<span class="txt">9</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="10">
															<span class="txt">10</span>
														</label>
													</div>


													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="11">
															<span class="txt">11</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="12">
															<span class="txt">12</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="13">
															<span class="txt">13</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="14">
															<span class="txt">14</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="15">
															<span class="txt">15</span>
														</label>
													</div>


													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="16">
															<span class="txt">16</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="17">
															<span class="txt">17</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="18">
															<span class="txt">18</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="19">
															<span class="txt">19</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="20">
															<span class="txt">20</span>
														</label>
													</div>


													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="21">
															<span class="txt">21</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="22">
															<span class="txt">22</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="23">
															<span class="txt">23</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="24">
															<span class="txt">24</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="25">
															<span class="txt">25</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="26">
															<span class="txt">26</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="27">
															<span class="txt">27</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="28">
															<span class="txt">28</span>
														</label>
													</div>
												</div>
												<div class="option-btn-box">
													<div class="option-btn">
														<label>
															<input type="radio" name="option" value="auto">
															<span class="txt">자동선택</span><i></i>
														</label>
													</div>
													<div class="option-btn">
														<label>
															<input type="radio" name="option" value="cancel">
															<span class="txt">취소</span><i></i>
														</label>
													</div>
												</div>

											</div>
										</div>
									</div>
								</div>
								<div class="buy-wrap">
									<div class="total-buy-box">
										<div class="subject-box">대량 구매</div>
										<div class="total-num-box">1</div>
									</div>

									<div class="buy-btn-box">
										<button class="buy-btn">로또 구매</button>
									</div>
								</div>

							</div>
						</div>

						<div class="item-box">
							<div class="number-buy-wrap">
								<article class="info-msg-box">
									<i class="ic-msg"></i>
									<div class="info-msg-txt">구매번호 리스트</div>
								</article>

								<div class="number-list-container">

								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>


<script>
    // 선택할 숫자 버튼들을 알기위해 리스트로 담음
    let numBtnList = document.querySelectorAll('.num-btn');


    //숫자버튼에 체크됐을 때 조건을 주기 위해 리스트에서 하나씩 숫자버튼을 가지고 옴
    numBtnList.forEach(function (numBtn) {
        numBtn.querySelector('input[type=checkbox]').addEventListener('change', function () {
            //각 숫자버튼들이 묶여있는 가까운 부모를 찾기 위해 숫자버튼이 체크 했을 때 해당 부모를 변수에 담음
            const chkInner = this.closest('.chk-inner');

            //각 게임에 체크된 숫자버튼들을 5개 이상 클릭 했을 때를 알기 위해 리스트에 담음
            let checkedList = chkInner.querySelectorAll('input[type=checkbox]:checked');

            // 체크된 노드들이 5개 이상일 때 체크된 게 적용이 안되게 false값과 알림창을 띄움
            if (checkedList.length > 5) {
                this.checked = false;
                alert('5개만 체크')
            }
        });
    });


    //로또 구매버튼을 눌렀을 때 구매번호 리스트에 체크한 번호들이 나오기 위해 클릭 이벤트를 바인딩 함
    const buyBtn = document.querySelector('.buy-btn');
    buyBtn.addEventListener('click', function () {
        buy();
    });


    function buy() {
        //각 숫자 버튼이 체크된 각 부모를 찾기 위해서 변수에 담음
        const gameList = document.querySelectorAll('.chk-box');
        //숫자 버튼이 나타나는 곳을 지정하기 위해 변수에 담음
        const buyResult = document.querySelector('.number-list-container');

        //체크된 값이 새배열에 담겨있는 걸 구매번호 리스트에 뿌리기 위해 새배열을 생성함
        let selected = [];

        /**
         * 선택한 번호를 완성된 게임으로 만듦
         */
        //각 게임에서 숫자 버튼을 5개씩 체크가 됐을 때 새배열에 체크된 숫자버튼의 값을 만들기 위함.
        gameList.forEach(function (game) {

            let checkedList = game.querySelectorAll('input[type=checkbox]:checked');

            if (checkedList.length == 5) {
                const numbers = [];

                checkedList.forEach(function (chk) {
                    numbers.push(chk.value)

                });
                selected.push(numbers);
            }
        });

        //숫자버튼을 클릭하지 않고 로또 구매 버튼을 눌렀을 때 알림참으로 표기
        if (selected.length === 0) {
            alert('A 또는 B 게임에서 정확히 5개의 번호를 선택해주세요.');
            return;
        }

        /**
         * 완성된 게임을 화면에 그린다
         */
        let str = '';

        selected.forEach(function (numbers) {

            str += `<div class="number-list">`
            numbers.forEach(function (number) {
                let bgColor;
                if (number >= 1 && number <= 10) {
                    bgColor = "bg-yellow";
                } else if (number >= 11 && number <= 20) {
                    bgColor = "bg-blue";
                } else if (number >= 21 && number <= 30) {
                    bgColor = "bg-red";
                } else {
                    bgColor = "bg-green";
                }

                str += `<span class="buy-number ${bgColor}">${number}</span>`;
            });
            str += '</div>'
        });

        buyResult.innerHTML += str;
    }
</script>
</body>
</html>
