<!doctype html>
<html lang="ko">
<head>
	<meta charset="UTF-8">
	<meta name="viewport"
	      content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<link rel="stylesheet" type="text/css" href="../css/style1.css">
	<title>Lotto Play</title>
</head>
<body>

<div class="lotto-container">
	<div class="inner wrap">
		<header>
			<div class="header-group">
				<div class="logo-wrap">
					<a href="#none" class="logo-box">
						<img src="../img/img_logo.png">
					</a>
				</div>
			</div>
		</header>

		<div class="contents">
			<div class="user-wrap">
				<div class="item-box">
					<div class="user-mane-box">Test1님</div>
				</div>
				<div class="item-box">
					<div class="point-box">43,000P</div>
					<div class="lobby-btn-box">
						<a href="#none" class="lobby-btn">로비 이동</a>
					</div>
				</div>
			</div>

			<div class="logo-layout-wrap">
				<div class="lotto-tab-list">
					<button class="tab-btn-box" id="TabBtn1">로또</button>
					<button class="tab-btn-box active" id="TabBtn2">구매 하기</button>
					<button class="tab-btn-box" id="TabBtn3">구매 내역</button>
					<button class="tab-btn-box" id="TabBtn4">배분 방식</button>
				</div>

				<div class="lotto-check-group">
					<div class="check-inner">
						<div class="item-box">
							<div class="checked-wrap">
								<article class="info-msg-box">
									<i class="ic-msg"></i>
									<div class="info-msg-txt">5개의 번호를 선택하세요.</div>
								</article>

								<div class="checked-board">
									<div class="chk-wrap">
										<div class="chk-box">
											<div class="subject-box">
												<div class="label-box">A</div>
												<div class="price-box">1,000</div>
											</div>
											<div class="chk-con-box">
												<div class="chk-inner">
													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="1">
															<span class="txt">1</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="2">
															<span class="txt">2</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="3">
															<span class="txt">3</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="4">
															<span class="txt">4</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="5">
															<span class="txt">5</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="6">
															<span class="txt">6</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="7">
															<span class="txt">7</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="8">
															<span class="txt">8</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="9">
															<span class="txt">9</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="10">
															<span class="txt">10</span>
														</label>
													</div>


													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="11">
															<span class="txt">11</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="12">
															<span class="txt">12</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="13">
															<span class="txt">13</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="14">
															<span class="txt">14</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="15">
															<span class="txt">15</span>
														</label>
													</div>


													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="16">
															<span class="txt">16</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="17">
															<span class="txt">17</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="18">
															<span class="txt">18</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="19">
															<span class="txt">19</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="20">
															<span class="txt">20</span>
														</label>
													</div>


													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="21">
															<span class="txt">21</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="22">
															<span class="txt">22</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="23">
															<span class="txt">23</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="24">
															<span class="txt">24</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="25">
															<span class="txt">25</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="26">
															<span class="txt">26</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="27">
															<span class="txt">27</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="28">
															<span class="txt">28</span>
														</label>
													</div>
												</div>
												<div class="option-btn-box">
													<div class="option-btn">
														<label>
															<input type="radio" name="option" value="auto">
															<span class="txt">자동선택</span><i></i>
														</label>
													</div>
													<div class="option-btn">
														<label>
															<input type="radio" name="option" value="cancel">
															<span class="txt">취소</span><i></i>
														</label>
													</div>
												</div>

											</div>
										</div>
										<div class="chk-box">
											<div class="subject-box">
												<div class="label-box">B</div>
												<div class="price-box">1,000</div>
											</div>
											<div class="chk-con-box">
												<div class="chk-inner">
													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="1">
															<span class="txt">1</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="2">
															<span class="txt">2</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="3">
															<span class="txt">3</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="4">
															<span class="txt">4</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="5">
															<span class="txt">5</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="6">
															<span class="txt">6</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="7">
															<span class="txt">7</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="8">
															<span class="txt">8</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="9">
															<span class="txt">9</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="10">
															<span class="txt">10</span>
														</label>
													</div>


													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="11">
															<span class="txt">11</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="12">
															<span class="txt">12</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="13">
															<span class="txt">13</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="14">
															<span class="txt">14</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="15">
															<span class="txt">15</span>
														</label>
													</div>


													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="16">
															<span class="txt">16</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="17">
															<span class="txt">17</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="18">
															<span class="txt">18</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="19">
															<span class="txt">19</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="20">
															<span class="txt">20</span>
														</label>
													</div>


													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="21">
															<span class="txt">21</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="22">
															<span class="txt">22</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="23">
															<span class="txt">23</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="24">
															<span class="txt">24</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="25">
															<span class="txt">25</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="26">
															<span class="txt">26</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="27">
															<span class="txt">27</span>
														</label>
													</div>

													<div class="num-btn">
														<label>
															<input type="checkbox" name="number" value="28">
															<span class="txt">28</span>
														</label>
													</div>
												</div>

												<div class="option-btn-box">
													<div class="option-btn">
														<label>
															<input type="radio" name="option" value="auto">
															<span class="txt">자동선택</span><i></i>
														</label>
													</div>
													<div class="option-btn">
														<label>
															<input type="radio" name="option" value="cancel">
															<span class="txt">취소</span><i></i>
														</label>
													</div>
												</div>
											</div>

										</div>

									</div>
								</div>
								<div class="buy-wrap">
									<div class="total-buy-box">
										<div class="subject-box">대량 구매</div>
										<div class="total-num-box">1</div>
									</div>

									<div class="buy-btn-box">
										<button class="buy-btn">로또 구매</button>
									</div>
								</div>

							</div>
						</div>

						<div class="item-box">
							<div class="number-buy-wrap">
								<article class="info-msg-box">
									<i class="ic-msg"></i>
									<div class="info-msg-txt">구매번호 리스트</div>
								</article>

								<div class="number-list-container">

								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>


<script>
    let numBtnList = document.querySelectorAll('.num-btn');

    numBtnList.forEach(function (numBtn){
        numBtn.querySelector('input[type=checkbox]').addEventListener('change',function(){
            let game = this.closest('.chk-inner');

            let checked = game.querySelectorAll('input[type=checkbox]:checked');



            if(checked.length > 5){
                this.checked = false; //또는 null이 올 수 있다.
                alert('5개 까지만 체크가능 합니다.')

            }
        });

    });


    function buy() {
		    // 현재 game
        let games = document.querySelectorAll('.chk-box')
        console.log("games")
        console.log(games)

		    games.forEach(function(game){
            // 현재 game에서 체크된 input 리스트 가져오기
            const selectedList = game.querySelectorAll('input[type=checkbox]:checked')
            console.log("selectedList")
            console.log(selectedList)

            // 5개 이상 선택된 게임만 처리
				    if(selectedList.length >= 5){
                // input 리스트를 html string 만들기
                const html = numberMaker(selectedList)

                // html string 삽입 위치
                const resultSection = document.querySelector('.number-list-container')

                //beforeend는 요소 내부, 마지막 자식 뒤에 삽입할 위치를 지정
                //   콘텐츠를 삽입 할 수 있음.
                resultSection.insertAdjacentHTML('beforeend', html);
				    }




        })





    }


    // <div class="number-list"></div>

    const numberMaker = (selectedList) => {

        const container = document.createElement('div');
        container.className = 'number-list';

        let str = "";

		    str += "<div class='number-list'>"

		    //parseInt()는 문자열에서 숫자를 추출해서 실제 숫자 값으로 변환하는 것
        selectedList.forEach(selectedItem => {
            const num = parseInt(selectedItem.value);
            let bgColor = '';

            if (num >= 1 && num <= 10){
                bgColor = 'bg-yellow';
            } else if(num >= 11 && num <= 20){
                bgColor = 'bg-blue';
            } else if(num >= 21 && num <= 30){
                bgColor = 'bg-red';
            }else{
                bgColor = 'bg-green';
            }



            //문자열에 변수를 넣어야 함. 넣을 때는 ${}을 사용하지 않고 변수를 넣으면 문자열로 인식해서 변수명이 나옴.
		        //변수 값을 사용하려면 ${}문법을 사용해 변수 값을 출력함.
            str += `<div class="buy-number ${bgColor}">${selectedItem.value}</div>`
            // str += "<div class=\"buy-number\">" + selectedItem.value + "</div>"
        })

        str += "</div>"

        console.log(str)

		    return str;

    }

    const getGameLength = () => {


        let errorFlag = false;
        console.log("errorFlag")
        console.log(errorFlag)

        document.querySelectorAll('.chk-box').forEach(box => {

            const checked = box.querySelectorAll('input[type=checkbox]:checked').length


		        //게임에서 하나라도 5개 이상 선택된 게임이 있으면 리스트에 출력
		        if(checked >= 5){
                errorFlag = true;
		        }
        })

		    //유효한 게임이 없을 시 true 반환
		    return !errorFlag;





    }




    const lottoBuy = document.querySelector('.buy-btn');
    lottoBuy.addEventListener('click', function () {


        if(getGameLength()){
            alert("5개 이상 선택해야 합니다.")
		        return false;
        }


        // 노드를 숫자로 알고 싶을 떄

		    // for(let i = 0 ; i < [n] ; i ++){
        //
		    // }
		    // 변수에 담은 배열을 숫자로 표현하고 싶을 때
		    // 배열에 담긴걸 숫자로 알고 싶을때
		    // 배열에 담긴 스트롱을 숫자로 알고 표현해야할 때

        buy();

    })

    function lottoMaker() {
        //math.random() : 0~1 사이의 난수(랜덤한 수)를 반환 하는 함수로 1은 포함하지 않음.
        //Math.floor() : 주어진 숫자를 소수점 이하를 버린 정수로 내림하는 함수.

        //배열에 5개 번호를 담을 변수
        var lotto = []; //빈배열

        //배열에 1~28의 숫자 담기
        var nums = [];

        //1~28의 숫자를 담는 for문
        for (var i = 1; i <= 28; i++) {
            nums.push(i);
        }

        //변수에 원하는 값이 들어갔는지 확인 - 확인 후 주석처리
        // alert(nums);

        //5개의 숫자를 nums에 빼오는 반복문
        for (var i = 0; i < 5; i++) {
            //몇번째 것을 빼올 지 지정하는 랜덤 번째 처리
            //0~27번째를 선택
            //반복되면서 숫자 한개 씩 빠짐
            var num = Math.floor(Math.random() * (28 - i));

            //해당 순번의 숫자를 로또 배열에 담기
            lotto.push(nums[num]);


            //filter() : 조건에 맞는 배열만 새로운 배열로 반환하는 메서드
            //nums배열에서 선택된 값이 빠져야 함
            nums = nums.filter(function (n) {
                return n != nums[num];
            });
        }

        //오름차순 정렬
        lotto.sort(function (a, b) {
            return a - b;
        });

        //출력
        console.log('선택한 로또번호 : ' + lotto);

        document.write('이번 주 로또번호 : ' + lotto);


    }



</script>

</body>
</html>
